@model EECIP.Models.vmForumLatestTopicsView

@Html.Partial("_SubNavigation")

<div class="row">
    <div class="col-md-9">
        @*@Html.Action("ListMainCategories", "Forum")*@

        <div class="latesttopics">

            @if (Model._topics != null)
            {
                foreach (var topic in Model._topics)
                {
                    Html.RenderPartial("_Topic", topic);
                }
            }

            @if (Model.numRecs > 10)
            {
                <ul class="pagination" id="pagination" style="margin:0px"></ul>
            }

        </div>
        @*@Html.Action("LatestTopics", "Forum")*@
    </div>

    @Html.Partial("_CommonSideNav")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/pagination")

    <script type="text/javascript">
        $(function () {
            var _totalRec = @Model.numRecs;
            var _totalPages = Math.round(_totalRec / 10) + 1;
            var obj = $('#pagination').twbsPagination({
                initiateStartPageClick: false,
                totalPages: _totalPages,
                visiblePages: 10,
                startPage: @Model.currentPage,
                onPageClick: function (event, page) {
                    window.location.href = '@Url.Action("Following", "Forum")?p=' + page;
                }
            });
        });
    </script>
}


